<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Year 8 Math Challenge: Expressions & Formulae</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-y: auto;
        }
        .slide-content {
            min-height: 400px;
        }
        .game-container {
            min-height: 600px;
        }
        .option-btn {
            transition: all 0.2s ease-in-out;
        }
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        .correct {
            animation: correct-pulse 0.5s;
        }
        .incorrect {
            animation: incorrect-shake 0.5s;
        }
        @keyframes correct-pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(4, 120, 87, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(4, 120, 87, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(4, 120, 87, 0); }
        }
        @keyframes incorrect-shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">

    <div id="app-container" class="w-full h-full max-w-5xl mx-auto p-4 flex flex-col">

        <!-- Level Selection Screen -->
        <div id="level-selection" class="flex flex-col items-center justify-center h-full">
            <h1 class="text-5xl font-bold mb-2 text-cyan-400">Year 8 Math Challenge</h1>
            <p class="text-xl mb-12 text-gray-300">Expressions & Formulae</p>
            <div id="levels-grid" class="grid grid-cols-1 md:grid-cols-2 gap-8 w-full">
                <!-- Level cards will be inserted here by JavaScript -->
            </div>
        </div>
        
        <!-- Presentation & Game Screen -->
        <div id="main-view" class="hidden flex-col h-full w-full">
            
            <!-- Presentation Slides View -->
            <div id="presentation-view" class="w-full bg-gray-800 rounded-xl p-8 shadow-2xl flex-grow flex flex-col justify-between my-8">
                <div>
                    <h2 id="slide-topic" class="text-3xl font-bold text-cyan-400 mb-4"></h2>
                    <div id="slide-content" class="text-lg text-gray-200 space-y-4 slide-content">
                        <!-- Slide content will be inserted here -->
                    </div>
                </div>
                <div class="flex justify-between items-center mt-6">
                    <button id="prev-slide-btn" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg">Previous</button>
                    <span id="slide-counter" class="text-gray-400"></span>
                    <div>
                        <button id="next-slide-btn" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-4 rounded-lg mr-2">Next</button>
                        <button id="start-game-btn" class="bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg">Start Quiz!</button>
                    </div>
                </div>
            </div>

            <!-- Game View -->
            <div id="game-view" class="hidden w-full bg-gray-800 rounded-xl p-8 shadow-2xl flex-grow flex flex-col game-container my-8">
                <div class="flex justify-between items-center mb-4">
                    <h2 id="game-topic" class="text-2xl font-bold text-cyan-400"></h2>
                    <button id="back-to-levels-btn" class="bg-red-600 hover:bg-red-500 text-white font-bold py-2 px-4 rounded-lg">End Quiz</button>
                </div>
                
                <div class="w-full bg-gray-700 rounded-full h-4 mb-4">
                    <div id="progress-bar" class="bg-green-500 h-4 rounded-full" style="width: 0%"></div>
                </div>
                <div class="flex justify-center text-sm text-gray-400 mb-6">
                    <span id="progress-text">Question 1/50</span>
                </div>

                <div class="bg-gray-900 p-6 rounded-lg mb-6 text-center">
                    <p id="question-text" class="text-2xl font-semibold"></p>
                </div>

                <div id="options-grid" class="grid grid-cols-2 md:grid-cols-3 gap-4 flex-grow">
                    <!-- Option buttons will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Modal for results/messages -->
        <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-xl p-8 shadow-2xl text-center max-w-md w-full">
                <h3 id="modal-title" class="text-3xl font-bold text-cyan-400 mb-4"></h3>
                <p id="modal-text" class="text-lg mb-6"></p>
                <button id="modal-btn" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 px-6 rounded-lg">Continue</button>
            </div>
        </div>

    </div>

    <script>
        // --- DATA ---
        const levelsData = [
            {
                title: "Constructing Expressions",
                description: "Use letters and symbols to represent situations.",
                unlocked: true,
                slides: [
                    {
                        title: "What is an Expression?",
                        content: `<p>An algebraic expression uses letters (variables) to represent unknown numbers. It's a combination of numbers, variables, and operations.</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4">
                                      <p class="text-2xl text-center"><span class="text-cyan-400 font-bold">3n + 8</span></p>
                                      <ul class="list-disc list-inside ml-4 mt-2">
                                        <li><span class="text-cyan-400">n</span> is the <strong>variable</strong>.</li>
                                        <li><span class="text-cyan-400">3</span> is the <strong>coefficient</strong> of n.</li>
                                        <li><span class="text-cyan-400">8</span> is the <strong>constant</strong>.</li>
                                        <li><span class="text-cyan-400">3n</span> and <span class="text-cyan-400">8</span> are the <strong>terms</strong>.</li>
                                      </ul>
                                  </div>`
                    },
                    {
                        title: "Writing Expressions",
                        content: `<p>We translate words into mathematical expressions. Remember the order of operations!</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4 space-y-4">
                                      <p class="text-xl">"Double a number x, then subtract 3" becomes <span class="text-green-400 font-bold">2x - 3</span>.</p>
                                      <p class="text-xl">"Add 2 to a number x, then multiply by 4" becomes <span class="text-green-400 font-bold">4(x + 2)</span>. The brackets are important to show that the addition happens first.</p>
                                      <p class="text-xl">"Divide a number x by 3, then add 1" becomes <span class="text-green-400 font-bold">x/3 + 1</span>.</p>
                                  </div>`
                    },
                ],
                questions: [
                    // Moderate Difficulty (40 questions)
                    { q: "A number n is multiplied by 3, then 5 is added. What is the expression?", o: ["n+3×5", "3n+5", "5n+3", "3(n+5)", "n/3 + 5", "5(n+3)"], a: "3n+5" },
                    { q: "A number x is divided by 2, then 7 is subtracted. What is the expression?", o: ["x/2 - 7", "2/x - 7", "7 - x/2", "x/(2-7)", "(x-7)/2", "2x-7"], a: "x/2 - 7" },
                    { q: "4 is added to a number y, and the result is multiplied by 6. What is the expression?", o: ["4y+6", "6y+4", "4(y+6)", "6(y+4)", "y+24", "y+4×6"], a: "6(y+4)" },
                    { q: "What is the coefficient of x in the expression 7 - 4x?", o: ["7", "4", "-4", "x", "3", "11"], a: "-4" },
                    { q: "How many terms are in the expression 2a + 3b - c?", o: ["1", "2", "3", "4", "5", "6"], a: "3" },
                    { q: "The cost of a pen is $p. What is the cost of 5 pens?", o: ["p+5", "5p", "p-5", "p/5", "p⁵", "5-p"], a: "5p" },
                    { q: "There are b boys and g girls in a class. What is the total number of students?", o: ["b+g", "b-g", "bg", "b/g", "g-b", "2b+g"], a: "b+g" },
                    { q: "A rectangle has length L and width W. What is its perimeter?", o: ["LW", "L+W", "2L+W", "L+2W", "2(L+W)", "2LW"], a: "2(L+W)" },
                    { q: "A rectangle has length L and width W. What is its area?", o: ["LW", "L+W", "2(L+W)", "2L+2W", "L/W", "W/L"], a: "LW" },
                    { q: "I have x sweets and eat 3. How many are left?", o: ["x+3", "3-x", "3x", "x/3", "x-3", "x³"], a: "x-3" },
                    { q: "A number k is squared, then multiplied by 5.", o: ["5k²", "(5k)²", "k²+5", "5+k²", "25k²", "k/5"], a: "5k²" },
                    { q: "What is the constant term in 9p + 2q - 1?", o: ["9", "2", "1", "-1", "p", "q"], a: "-1" },
                    { q: "The sum of two numbers is 10. If one is x, what is the other?", o: ["x+10", "x-10", "10-x", "10x", "10/x", "x/10"], a: "10-x" },
                    { q: "A car travels at 60 km/h for t hours. What is the distance travelled?", o: ["60+t", "60-t", "t-60", "60/t", "t/60", "60t"], a: "60t" },
                    { q: "Subtract 7 from a number n, then divide by 3.", o: ["(n-7)/3", "n-7/3", "3/(n-7)", "(7-n)/3", "3n-7", "n/3-7"], a: "(n-7)/3" },
                    { q: "The price of an apple is $a. The price of a banana is $b. What is the cost of 2 apples and 3 bananas?", o: ["2a+3b", "3a+2b", "5ab", "a²b³", "6ab", "(a+b)⁵"], a: "2a+3b" },
                    { q: "A number is x. A second number is 5 more than the first. What is their sum?", o: ["2x+5", "x+5", "x(x+5)", "5x", "2x-5", "x-5"], a: "2x+5" },
                    { q: "A number is y. A second number is twice the first. What is their product?", o: ["3y", "y+2y", "2y²", "y²", "y(y+2)", "y+2"], a: "2y²" },
                    { q: "What is the expression for 'one-quarter of x'?", o: ["4x", "x/4", "x-4", "x+4", "x⁴", "4/x"], a: "x/4" },
                    { q: "A triangle has sides of length a, a+2, and a+4. What is its perimeter?", o: ["3a+6", "a+6", "a(a+2)(a+4)", "a³+6", "3a-6", "a⁶"], a: "3a+6" },
                    { q: "A number p is cubed.", o: ["3p", "p+3", "p³", "p/3", "p-3", "3/p"], a: "p³" },
                    { q: "What is the next consecutive integer after n?", o: ["2n", "n-1", "n/2", "n²", "n+1", "n"], a: "n+1" },
                    { q: "A taxi costs $5 plus $2 per kilometre (k). What is the cost of a journey?", o: ["5k+2", "2k+5", "7k", "5(k+2)", "2(k+5)", "10k"], a: "2k+5" },
                    { q: "A number x is decreased by 10.", o: ["10-x", "x-10", "10x", "x/10", "10/x", "x+10"], a: "x-10" },
                    { q: "The product of a and b is subtracted from the sum of a and b.", o: ["ab - (a+b)", "(a+b) - ab", "a+b+ab", "ab/(a+b)", "(a-b)ab", "a+b-a-b"], a: "(a+b) - ab" },
                    { q: "A book costs $b. A magazine costs $3 less. What is the cost of 2 books and 1 magazine?", o: ["2b + (b-3)", "2b + (b+3)", "2b + 3", "3b-3", "3b+3", "b-3"], a: "3b-3" },
                    { q: "What is the expression for 'two-thirds of y'?", o: ["2y/3", "3y/2", "2(y/3)", "Both A and C", "y+2/3", "2/3-y"], a: "Both A and C" },
                    { q: "The side of a square is s. What is the expression for its area?", o: ["4s", "s²", "2s", "s+4", "s/4", "s-4"], a: "s²" },
                    { q: "A number is n. What is 15% of this number?", o: ["15n", "n/15", "0.15n", "1.15n", "n-15", "n+0.15"], a: "0.15n" },
                    { q: "A phone plan costs $20 per month, plus $0.10 per minute (m) of calls. What is the monthly bill?", o: ["20 + 0.1m", "20m + 0.1", "20.1m", "20/m", "20.1", "20-0.1m"], a: "20 + 0.1m" },
                    { q: "The sum of three consecutive numbers, where the smallest is x.", o: ["3x", "x+1+2", "x+x+x", "3x+3", "x³+3", "3x+6"], a: "3x+3" },
                    { q: "A number z is doubled, and then the result is squared.", o: ["2z²", "(2z)²", "4z", "2+z²", "(z+2)²", "z⁴"], a: "(2z)²" },
                    { q: "The average of three numbers a, b, and c.", o: ["abc", "a+b+c", "(a+b+c)/3", "3(a+b+c)", "3abc", "abc/3"], a: "(a+b+c)/3" },
                    { q: "A number is increased by 5%. If the number is n, what is the new number?", o: ["n+5", "n+0.05", "1.05n", "0.05n", "5n", "n/5"], a: "1.05n" },
                    { q: "A plumber charges a $50 call-out fee and $40 per hour (h). What is the total cost?", o: ["50h+40", "40h+50", "90h", "50(h+40)", "40(h+50)", "50+h+40"], a: "40h+50" },
                    { q: "The difference between two numbers is 7. If the smaller is y, what is the larger?", o: ["y-7", "7-y", "7y", "y/7", "y+7", "7/y"], a: "y+7" },
                    { q: "The base of a triangle is b and its height is h. What is its area?", o: ["bh", "b+h", "2bh", "bh/2", "(b+h)/2", "b²/2"], a: "bh/2" },
                    { q: "A number is x. What is the number that is 10 less than twice x?", o: ["10-2x", "2x-10", "2(x-10)", "10(2-x)", "20x", "x²-10"], a: "2x-10" },
                    { q: "A library has y books. It buys 100 more, then lends out half of the total.", o: ["(y+100)/2", "y/2 + 100", "y+50", "100y/2", "y-50", "2(y+100)"], a: "(y+100)/2" },
                    { q: "The cost of n items at $d each.", o: ["n+d", "n-d", "d-n", "nd", "n/d", "d/n"], a: "nd" },
                    // Hard Difficulty (10 questions)
                    { q: "The sum of the squares of two numbers, a and b.", o: ["(a+b)²", "a²+b²", "a²b²", "2a+2b", "2ab", "a+b"], a: "a²+b²" },
                    { q: "The square of the sum of two numbers, a and b.", o: ["(a+b)²", "a²+b²", "a²b²", "2a+2b", "2ab", "a+b"], a: "(a+b)²" },
                    { q: "A number n is increased by 10%, then the result is decreased by 10%. What is the final number?", o: ["n", "0.99n", "1.01n", "0.9n", "1.1n", "n-0.1"], a: "0.99n" },
                    { q: "A rectangle's length is 3 cm more than its width, w. What is its area?", o: ["w(w+3)", "w² + 3", "4w+6", "2w+3", "3w²", "w+3w"], a: "w(w+3)" },
                    { q: "The mean of four numbers is m. If three of the numbers are x, y, and z, what is the fourth number?", o: ["m-x-y-z", "4m-x-y-z", "(x+y+z)/4", "m/4 - (x+y+z)", "4(m-x-y-z)", "m-(x+y+z)/3"], a: "4m-x-y-z" },
                    { q: "A car travels for x hours at 60 km/h and y hours at 80 km/h. What is the average speed?", o: ["70", "140/(x+y)", "(60x+80y)/(x+y)", "(x+y)/(60x+80y)", "60x+80y", "140"], a: "(60x+80y)/(x+y)" },
                    { q: "A number x is divided by y, and the result is added to the product of x and y.", o: ["x/y + xy", "(x+xy)/y", "x(1/y + y)", "Both A and C", "xy/(x+y)", "y/x + xy"], a: "Both A and C" },
                    { q: "The volume of a box with length l, width w, and height h.", o: ["l+w+h", "2(lw+lh+wh)", "lwh", "l²/w", "lwh/3", "4(l+w+h)"], a: "lwh" },
                    { q: "A shop gives a 20% discount on an item priced at $p. What is the final price?", o: ["p-20", "p-0.2", "0.2p", "1.2p", "0.8p", "p/20"], a: "0.8p" },
                    { q: "The surface area of a cube with side length s.", o: ["s³", "s²", "4s", "6s", "6s²", "12s"], a: "6s²" },
                ]
            },
            {
                title: "Using Expressions & Formulae",
                description: "Substitute values and change the subject of a formula.",
                unlocked: true,
                slides: [
                    {
                        title: "Substituting into Expressions",
                        content: `<p>To find the value of an expression, we <strong>substitute</strong> the given numbers for the variables. Remember to follow the order of operations (BIDMAS/PEMDAS).</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4">
                                      <p class="text-xl">Find the value of <span class="text-cyan-400">3x² + 4</span> when <span class="text-cyan-400">x = 10</span>.</p>
                                      <p class="text-xl mt-2">1. Indices first: 10² = 100</p>
                                      <p class="text-xl mt-2">2. Multiplication next: 3 × 100 = 300</p>
                                      <p class="text-xl mt-2">3. Addition last: 300 + 4 = <span class="text-green-400 font-bold">304</span></p>
                                  </div>`
                    },
                    {
                        title: "Changing the Subject of a Formula",
                        content: `<p>A formula shows the relationship between variables. The <strong>subject</strong> is the variable on its own. We can rearrange a formula to make a different variable the subject using inverse operations.</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4">
                                    <p class="text-xl">Formula: <span class="text-cyan-400">F = ma</span> (Subject is F)</p>
                                    <p class="text-xl mt-2">To make <span class="text-cyan-400">m</span> the subject, divide both sides by <span class="text-cyan-400">a</span>.</p>
                                    <p class="text-xl mt-2"><span class="text-green-400 font-bold">m = F/a</span></p>
                                    <hr class="my-2 border-gray-600">
                                    <p class="text-xl">Formula: <span class="text-cyan-400">y = x + 9</span> (Subject is y)</p>
                                    <p class="text-xl mt-2">To make <span class="text-cyan-400">x</span> the subject, subtract 9 from both sides.</p>
                                    <p class="text-xl mt-2"><span class="text-green-400 font-bold">x = y - 9</span></p>
                                  </div>`
                    },
                ],
                questions: [
                    // Moderate Difficulty (40 questions)
                    { q: "If p = 5, what is p + 7?", o: ["10", "11", "12", "13", "35", "2"], a: "12" },
                    { q: "If q = 10, what is 3q?", o: ["13", "7", "30", "310", "10/3", "3.33"], a: "30" },
                    { q: "If r = -2, what is r - 4?", o: ["-6", "-2", "2", "6", "8", "-8"], a: "-6" },
                    { q: "If s = 20, what is s/5?", o: ["4", "5", "15", "25", "100", "0.25"], a: "4" },
                    { q: "If a=3 and b=4, what is a+b?", o: ["1", "7", "12", "-1", "34", "43"], a: "7" },
                    { q: "If c=8 and d=2, what is c-d?", o: ["10", "16", "4", "6", "-6", "-10"], a: "6" },
                    { q: "If x=2, what is x²?", o: ["2", "4", "6", "8", "1", "0"], a: "4" },
                    { q: "If y=3, what is y³?", o: ["6", "9", "12", "27", "81", "1"], a: "27" },
                    { q: "If m=5, what is 2m+1?", o: ["7", "8", "10", "11", "15", "26"], a: "11" },
                    { q: "If n=12, what is n/2 - 2?", o: ["4", "5", "6", "8", "10", "22"], a: "4" },
                    { q: "If x=4 and y=1, what is 3x+y?", o: ["8", "12", "13", "16", "35", "43"], a: "13" },
                    { q: "If g=2 and h=5, what is gh?", o: ["7", "10", "3", "25", "52", "12"], a: "10" },
                    { q: "If k=10, what is k² + 5?", o: ["25", "105", "125", "100", "20", "15"], a: "105" },
                    { q: "If x=-3, what is x²?", o: ["-9", "-6", "6", "9", "3", "-3"], a: "9" },
                    { q: "If y=-2, what is y³?", o: ["-8", "-6", "6", "8", "4", "-4"], a: "-8" },
                    { q: "Make x the subject of y = x + 5.", o: ["x=y+5", "x=y-5", "x=5-y", "x=5y", "x=y/5", "x=5/y"], a: "x=y-5" },
                    { q: "Make a the subject of b = 3a.", o: ["a=b-3", "a=b+3", "a=3b", "a=3/b", "a=b/3", "a=b³"], a: "a=b/3" },
                    { q: "Make p the subject of q = p - 9.", o: ["p=q-9", "p=9-q", "p=q+9", "p=9q", "p=q/9", "p=9/q"], a: "p=q+9" },
                    { q: "Make m the subject of n = m/2.", o: ["m=n/2", "m=2/n", "m=n-2", "m=n+2", "m=2n", "m=n²"], a: "m=2n" },
                    { q: "If F=ma, what is a?", o: ["a=Fm", "a=F/m", "a=m/F", "a=F-m", "a=F+m", "a=m-F"], a: "a=F/m" },
                    { q: "If x=5, what is 3(x+2)?", o: ["17", "13", "21", "30", "10", "9"], a: "21" },
                    { q: "If y=1, what is 10 - y²?", o: ["8", "9", "10", "11", "99", "101"], a: "9" },
                    { q: "If a=2, b=3, c=4, what is abc?", o: ["9", "12", "18", "24", "30", "234"], a: "24" },
                    { q: "If P=2(L+W), find P when L=5 and W=3.", o: ["10", "13", "16", "30", "15", "8"], a: "16" },
                    { q: "If A=bh/2, find A when b=6 and h=4.", o: ["10", "12", "20", "24", "5", "48"], a: "12" },
                    { q: "Make L the subject of P = 4L.", o: ["L=P/4", "L=4P", "L=P-4", "L=P+4", "L=4/P", "L=P⁴"], a: "L=P/4" },
                    { q: "Make h the subject of V = LWH.", o: ["h=V-LW", "h=V+LW", "h=VLW", "h=V/(LW)", "h=(LW)/V", "h=V/L/W"], a: "h=V/(LW)" },
                    { q: "If x=-1, what is 5x+6?", o: ["-11", "-1", "1", "11", "55", "65"], a: "1" },
                    { q: "If y=-5, what is 20-2y?", o: ["10", "18", "22", "30", "0", "40"], a: "30" },
                    { q: "If z=0.5, what is 10z?", o: ["0.5", "5", "10.5", "9.5", "20", "0.05"], a: "5" },
                    { q: "If a=1, b=-1, what is a-b?", o: ["-2", "-1", "0", "1", "2", "11"], a: "2" },
                    { q: "If x=10, y=2, what is x/y + 3?", o: ["5", "8", "2", "15", "1.2", "4"], a: "8" },
                    { q: "Make c the subject of a=b+c.", o: ["c=a-b", "c=b-a", "c=ab", "c=a/b", "c=b/a", "c=a+b"], a: "c=a-b" },
                    { q: "Make y the subject of x=y-z.", o: ["y=x-z", "y=z-x", "y=x+z", "y=xz", "y=x/z", "y=z/x"], a: "y=x+z" },
                    { q: "If C=2πr, what is r?", o: ["r=C-2π", "r=C/(2π)", "r=2πC", "r=2π/C", "r=C+2π", "r=(2π)²"], a: "r=C/(2π)" },
                    { q: "If a=3, what is a²+a³?", o: ["15", "18", "27", "36", "a⁵", "a⁶"], a: "36" },
                    { q: "If x=4, y=2, what is (x+y)²?", o: ["12", "20", "36", "x²+y²", "8", "64"], a: "36" },
                    { q: "If x=4, y=2, what is x²+y²?", o: ["12", "20", "36", "(x+y)²", "8", "64"], a: "20" },
                    { q: "Make x the subject of y = 2x+1.", o: ["x=(y-1)/2", "x=(y+1)/2", "x=y/2-1", "x=2y-1", "x=y-1/2", "x=y-3"], a: "x=(y-1)/2" },
                    { q: "Make t the subject of v = u+at.", o: ["t=(v-u)/a", "t=(v+u)/a", "t=a(v-u)", "t=v-u-a", "t=v/a-u", "t=v-a/u"], a: "t=(v-u)/a" },
                    // Hard Difficulty (10 questions)
                    { q: "If a=2, b=-3, what is a²-b²?", o: ["-5", "5", "13", "-13", "1", "-1"], a: "-5" },
                    { q: "If x=-2, what is 3x²-5x?", o: ["2", "22", "-2", "-22", "12", "17"], a: "22" },
                    { q: "Make b the subject of A = (a+b)h/2.", o: ["b=2A/h-a", "b=2Ah-a", "b=A/2h-a", "b=2a/A-h", "b=h/2A-a", "b=2A-h-a"], a: "b=2A/h-a" },
                    { q: "If y = mx+c, find m when y=10, x=2, c=4.", o: ["1", "2", "3", "4", "5", "6"], a: "3" },
                    { q: "The formula for converting Celsius (C) to Fahrenheit (F) is F = 9C/5 + 32. What is F when C=20?", o: ["52", "60", "68", "72", "80", "95"], a: "68" },
                    { q: "Using F = 9C/5 + 32, make C the subject.", o: ["C=5(F-32)/9", "C=5F/9-32", "C=9(F-32)/5", "C=(F+32)5/9", "C=5F-32/9", "C=F-32*5/9"], a: "C=5(F-32)/9" },
                    { q: "If V = πr²h, find V when r=3 and h=10 (use π≈3.14).", o: ["94.2", "188.4", "282.6", "31.4", "942", "28.26"], a: "282.6" },
                    { q: "If T = 2π√(L/g), make L the subject.", o: ["L=g(T/2π)²", "L=gT²/2π", "L=(T/2πg)²", "L=g(2π/T)²", "L=2π(T/g)²", "L=T²/4π²g"], a: "L=g(T/2π)²" },
                    { q: "If x=-1 and y=2, what is the value of x³y - xy³?", o: ["-10", "-6", "6", "10", "0", "8"], a: "6" },
                    { q: "The area of a trapezium is A = (a+b)h/2. Find h if A=30, a=4, b=6.", o: ["3", "4", "5", "6", "10", "15"], a: "6" },
                ]
            },
            {
                title: "Expanding Brackets",
                description: "Learn to multiply out brackets in algebraic expressions.",
                unlocked: true,
                slides: [
                    {
                        title: "What is Expanding?",
                        content: `<p>To <strong>expand</strong> brackets, you multiply the term outside the brackets by <strong>every</strong> term inside the brackets.</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4 text-center">
                                      <p class="text-3xl"><span class="text-cyan-400 font-bold">3(2b + 5)</span> = (3 × 2b) + (3 × 5) = <span class="text-green-400 font-bold">6b + 15</span></p>
                                      <p class="text-3xl mt-4"><span class="text-cyan-400 font-bold">a(a - 3)</span> = (a × a) - (a × 3) = <span class="text-green-400 font-bold">a² - 3a</span></p>
                                  </div>`
                    },
                    {
                        title: "Expanding and Simplifying",
                        content: `<p>Sometimes you need to expand more than one bracket and then collect the 'like terms' to simplify the expression.</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4">
                                    <p class="text-xl">Expand and simplify: <span class="text-cyan-400">4(2x + 3) - 2(x + 1)</span></p>
                                    <p class="text-xl mt-2">1. Expand first bracket: 8x + 12</p>
                                    <p class="text-xl mt-2">2. Expand second bracket: -2x - 2</p>
                                    <p class="text-xl mt-2">3. Combine: 8x + 12 - 2x - 2</p>
                                    <p class="text-xl mt-2">4. Collect like terms: (8x - 2x) + (12 - 2) = <span class="text-green-400 font-bold">6x + 10</span></p>
                                  </div>`
                    },
                ],
                questions: [
                    // Moderate Difficulty (40 questions)
                    { q: "Expand 3(x+2)", o: ["3x+2", "3x+5", "3x+6", "x+6", "5x", "6x"], a: "3x+6" },
                    { q: "Expand 4(y-1)", o: ["4y-1", "4y-4", "y-4", "3y", "4y-5", "y-5"], a: "4y-4" },
                    { q: "Expand 2(a+8)", o: ["2a+8", "2a+10", "a+16", "2a+16", "10a", "16a"], a: "2a+16" },
                    { q: "Expand 5(3-b)", o: ["15-b", "8-b", "15-5b", "5-3b", "12b", "2b"], a: "15-5b" },
                    { q: "Expand x(x+4)", o: ["x²+4", "2x+4", "x²+4x", "5x", "4x²", "x+4x"], a: "x²+4x" },
                    { q: "Expand y(y-6)", o: ["y²-6", "2y-6", "y²-6y", "-5y", "-6y²", "y-6y"], a: "y²-6y" },
                    { q: "Expand 2p(p+3)", o: ["2p²+3", "2p²+6p", "3p+3", "5p", "2p²+6", "p²+6p"], a: "2p²+6p" },
                    { q: "Expand 3q(2q-1)", o: ["6q-1", "5q-1", "6q²-1", "6q²-3q", "3q", "6q-3"], a: "6q²-3q" },
                    { q: "Expand a(1+b)", o: ["a+b", "a+ab", "ab", "1+ab", "a+b+1", "2ab"], a: "a+ab" },
                    { q: "Expand -2(x+3)", o: ["-2x+3", "-2x+6", "-2x-6", "x-6", "2x-6", "-5x"], a: "-2x-6" },
                    { q: "Expand -5(y-2)", o: ["-5y-2", "-5y-10", "-5y+10", "y+10", "5y+10", "-7y"], a: "-5y+10" },
                    { q: "Expand x(y+z)", o: ["xy+z", "x+yz", "xyz", "xy+xz", "x(yz)", "y+xz"], a: "xy+xz" },
                    { q: "Expand 2(a+b+c)", o: ["2a+b+c", "a+2b+c", "2a+2b+2c", "2abc", "2(ab+c)", "2a+2b+c"], a: "2a+2b+2c" },
                    { q: "Expand 3(2p+q)", o: ["6p+q", "5p+q", "6p+3q", "3(2pq)", "9pq", "6p+3"], a: "6p+3q" },
                    { q: "Expand 4(m-3n)", o: ["4m-3n", "m-12n", "4m-12n", "4-3mn", "-8mn", "4m-7n"], a: "4m-12n" },
                    { q: "Expand x²(x+1)", o: ["x³+1", "x²+x", "x³+x²", "2x³", "x²+x", "3x³"], a: "x³+x²" },
                    { q: "Expand y(3y+z)", o: ["3y²+z", "4y+z", "3y²+yz", "3y²z", "3y+yz", "4yz"], a: "3y²+yz" },
                    { q: "Expand and simplify 2(x+1)+3", o: ["2x+4", "2x+5", "2x+6", "5x+2", "2x+3", "2x+1"], a: "2x+5" },
                    { q: "Expand and simplify 3(y+2)+y", o: ["3y+6", "4y+6", "4y+2", "3y+2", "7y", "10y"], a: "4y+6" },
                    { q: "Expand and simplify 5(a+3)-10", o: ["5a+5", "5a+13", "5a-7", "5a+25", "-5a+5", "5a-5"], a: "5a+5" },
                    { q: "Expand and simplify 4(b-1)+3b", o: ["7b-4", "4b-1", "7b-1", "b-4", "7b+3", "4b-4"], a: "7b-4" },
                    { q: "Expand and simplify 2(x+3)+3(x+1)", o: ["5x+4", "5x+7", "5x+9", "2x+9", "5x+5", "6x+7"], a: "5x+9" },
                    { q: "Expand and simplify 4(y+2)+2(y-1)", o: ["6y+1", "6y+6", "6y+7", "6y+10", "8y+1", "6y+8"], a: "6y+6" },
                    { q: "Expand and simplify 3(a+5)-2(a+1)", o: ["a+13", "a+17", "a+14", "a+4", "5a+13", "a+1"], a: "a+13" },
                    { q: "Expand and simplify 5(b-2)-3(b-1)", o: ["2b-13", "2b-7", "2b-9", "2b-11", "8b-7", "2b-3"], a: "2b-7" },
                    { q: "Expand 2x(3x+4)", o: ["6x+8x", "6x²+8x", "5x+4", "6x²+4", "14x²", "12x²"], a: "6x²+8x" },
                    { q: "Expand 3y(y-2y²)", o: ["3y²-6y³", "4y-5y³", "3y²-6y²", "-3y²", "3y²-2y²", "3y-6y³"], a: "3y²-6y³" },
                    { q: "Expand a(a+b+c)", o: ["a²+b+c", "a²+ab+ac", "a²+abc", "3a+b+c", "a+abc", "a³bc"], a: "a²+ab+ac" },
                    { q: "Expand and simplify x(x+2)+x²", o: ["x²+2x", "2x²+2x", "3x²+2x", "4x²", "x²+2", "x²+x²+2x"], a: "2x²+2x" },
                    { q: "Expand and simplify y(y-3)-2y", o: ["y²-5y", "y²-y", "y²-3", "-4y", "y²-3-2y", "y²-6y"], a: "y²-5y" },
                    { q: "Expand 6(2a-3b)", o: ["12a-18b", "8a-9b", "12a-3b", "2a-18b", "-6ab", "12a+18b"], a: "12a-18b" },
                    { q: "Expand p(q-r)", o: ["pq-r", "p-qr", "pq-pr", "pqr", "q-pr", "p-q-r"], a: "pq-pr" },
                    { q: "Expand -x(y-z)", o: ["-xy-z", "-xy-xz", "-xy+xz", "xy-xz", "x-y-z", "-xyz"], a: "-xy+xz" },
                    { q: "Expand and simplify 5+2(x+1)", o: ["7x+7", "5+2x+1", "2x+7", "5+2x+2", "7x+2", "2x+6"], a: "2x+7" },
                    { q: "Expand and simplify 10-3(y+1)", o: ["7y+7", "10-3y+1", "7-3y", "10-3y-3", "13-3y", "7y-3"], a: "7-3y" },
                    { q: "Expand and simplify a(b+1)+b(a+1)", o: ["2ab+a+b", "ab+1+ab+1", "2ab+2", "a+b+2", "ab+a+b", "2a+2b"], a: "2ab+a+b" },
                    { q: "Expand and simplify x(x-y)+y(y-x)", o: ["x²-2xy+y²", "x²-y²", "x²", "y²", "x²-xy+y²", "0"], a: "x²-2xy+y²" },
                    { q: "Expand 4(x+y)+x(4+y)", o: ["8x+4y+xy", "4x+4y+4x+xy", "8x+5y", "4x+4y+4+y", "4x+5y+4", "8x+4y"], a: "8x+4y+xy" },
                    { q: "Expand 2a(a-b)-b(a-b)", o: ["2a²-3ab+b²", "2a²-ab-b²", "2a²-2ab-ab-b²", "2a²-b²", "a²-b²", "2a-2b"], a: "2a²-3ab+b²" },
                    { q: "Expand and simplify 3(x+y)+2(x-y)", o: ["5x+y", "5x+5y", "5x-y", "x+5y", "x-y", "5x+2y"], a: "5x+y" },
                    // Hard Difficulty (10 questions)
                    { q: "Expand (x+2)(x+3)", o: ["x²+5x+6", "x²+6x+5", "x²+6", "2x+5", "x²+5", "x²+x+6"], a: "x²+5x+6" },
                    { q: "Expand (y-1)(y+4)", o: ["y²+3y-4", "y²-3y-4", "y²+5y-4", "y²-4", "y²+3", "2y+3"], a: "y²+3y-4" },
                    { q: "Expand (a-5)(a-2)", o: ["a²-7a+10", "a²-3a+10", "a²+7a+10", "a²-10", "a²-7a-10", "2a-7"], a: "a²-7a+10" },
                    { q: "Expand (2x+1)(x+3)", o: ["2x²+7x+3", "2x²+6x+3", "2x²+3", "3x+4", "2x²+5x+3", "2x²+7x+4"], a: "2x²+7x+3" },
                    { q: "Expand (3p-2)²", o: ["9p²-12p+4", "9p²-4", "9p²+4", "3p²-12p+4", "9p²-6p+4", "6p-4"], a: "9p²-12p+4" },
                    { q: "Expand and simplify 3(x+1)² - 2x", o: ["3x²+4x+3", "3x²+6x+1", "9x²+4x+9", "3x²-2x+3", "3x²+1", "3x²+4x+1"], a: "3x²+4x+3" },
                    { q: "Expand (x+y)(x-y)", o: ["x²-y²", "x²+y²", "x²-2xy-y²", "x²+2xy+y²", "0", "2x"], a: "x²-y²" },
                    { q: "Expand (a+b)(c+d)", o: ["ac+ad+bc+bd", "ab+cd", "ac+bd", "a+b+c+d", "abcd", "(a+b)c+(a+b)d"], a: "ac+ad+bc+bd" },
                    { q: "Expand (x+1)(x²+x+1)", o: ["x³+2x²+2x+1", "x³+1", "x³-1", "x³+x²+x+1", "x³+2x²+1", "x³+x+1"], a: "x³+2x²+2x+1" },
                    { q: "Expand (a+b)³", o: ["a³+3a²b+3ab²+b³", "a³+b³", "a³+a²b+ab²+b³", "3a+3b", "(a+b)(a²+b²)", "a³+2a²b+2ab²+b³"], a: "a³+3a²b+3ab²+b³" },
                ]
            },
            {
                title: "Factorising",
                description: "Learn to factorise expressions by finding the highest common factor.",
                unlocked: true,
                slides: [
                    {
                        title: "What is Factorising?",
                        content: `<p>Factorising is the <strong>reverse</strong> of expanding brackets. It means putting an expression back into brackets.</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4 text-center">
                                      <p class="text-xl">Expanding: <span class="text-cyan-400">4(x + 3)</span> ➔ <span class="text-green-400">4x + 12</span></p>
                                      <p class="text-xl mt-2">Factorising: <span class="text-green-400">4x + 12</span> ➔ <span class="text-cyan-400">4(x + 3)</span></p>
                                  </div>`
                    },
                    {
                        title: "How to Factorise",
                        content: `<p>To factorise an expression, you find the <strong>Highest Common Factor (HCF)</strong> of all the terms.</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4">
                                    <p class="text-xl">1. Find the HCF of the terms. For <span class="text-cyan-400">6x + 18</span>, the HCF of 6x and 18 is <span class="text-green-400">6</span>.</p>
                                    <p class="text-xl mt-2">2. Write the HCF outside a pair of brackets: <span class="text-green-400">6( ... )</span></p>
                                    <p class="text-xl mt-2">3. Divide each original term by the HCF and write the result inside the brackets: <br>6x ÷ 6 = x <br>18 ÷ 6 = 3</p>
                                    <p class="text-xl mt-2">So, the final answer is <span class="text-green-400 font-bold">6(x + 3)</span>.</p>
                                  </div>`
                    },
                    {
                        title: "Factorising with Variables",
                        content: `<p>The same method works when the HCF includes variables.</p>
                                  <div class="bg-gray-900 p-4 rounded-lg mt-4">
                                    <p class="text-xl">Factorise <span class="text-cyan-400">x² - 5x</span></p>
                                    <p class="text-xl mt-2">The HCF of x² and 5x is <span class="text-green-400">x</span>.</p>
                                    <p class="text-xl mt-2">Write x outside the brackets: <span class="text-green-400">x( ... )</span></p>
                                    <p class="text-xl mt-2">Divide the terms: x² ÷ x = x, and -5x ÷ x = -5</p>
                                    <p class="text-xl mt-2">Answer: <span class="text-green-400 font-bold">x(x - 5)</span></p>
                                  </div>`
                    },
                ],
                questions: [
                    // Moderate Difficulty (40 questions)
                    { q: "Factorise 2x + 4", o: ["2(x+4)", "2(x+2)", "4(x+1)", "x(2+4)", "2(2x+2)", "2x(1+2)"], a: "2(x+2)" },
                    { q: "Factorise 3y - 9", o: ["3(y-3)", "3(y-6)", "9(y-1)", "y(3-9)", "3(y-9)", "9(y-3)"], a: "3(y-3)" },
                    { q: "Factorise 5a + 10", o: ["5(a+10)", "10(a+1)", "5(a+2)", "a(5+10)", "5(a+5)", "2(2.5a+5)"], a: "5(a+2)" },
                    { q: "Factorise 12 - 4p", o: ["4(3-p)", "4(8-p)", "12(1-4p)", "2(6-2p)", "4(3-4p)", "p(12-4)"], a: "4(3-p)" },
                    { q: "Factorise x² + 3x", o: ["x(x+3)", "x²(1+3)", "3(x²+x)", "x(x²+3)", "3x(x+1)", "x(3x)"], a: "x(x+3)" },
                    { q: "Factorise y² - 7y", o: ["y(y-7)", "y²(1-7)", "7(y²-y)", "y(y-7y)", "7y(y-1)", "y(7-y)"], a: "y(y-7)" },
                    { q: "Factorise 6x + 18", o: ["3(2x+6)", "6(x+3)", "2(3x+9)", "9(x+2)", "6(x+18)", "x(6+18)"], a: "6(x+3)" },
                    { q: "Factorise 10 - 25m", o: ["10(1-2.5m)", "5(2-5m)", "5(5-2m)", "25(0.4-m)", "m(10-25)", "5(2-25m)"], a: "5(2-5m)" },
                    { q: "Factorise 4a + 8ab", o: ["4(a+2ab)", "4a(1+2b)", "a(4+8b)", "8a(0.5+b)", "4b(a+2a)", "2a(2+4b)"], a: "4a(1+2b)" },
                    { q: "Factorise 3p² + 6p", o: ["3(p²+2p)", "p(3p+6)", "3p(p+2)", "3p²(1+2p)", "6p(0.5p+1)", "3p(p+6)"], a: "3p(p+2)" },
                    { q: "Factorise 9xy - 12x", o: ["3(3xy-4x)", "x(9y-12)", "3x(3y-4)", "9x(y-12)", "12x(0.75y-1)", "3y(3x-4)"], a: "3x(3y-4)" },
                    { q: "Factorise 15z - 10yz", o: ["5(3z-2yz)", "z(15-10y)", "5z(3-2y)", "10z(1.5-y)", "5y(3z-2z)", "yz(15-10)"], a: "5z(3-2y)" },
                    { q: "What is the HCF of 8y and 4y²?", o: ["4", "y", "4y", "8y", "4y²", "8y²"], a: "4y" },
                    { q: "What is the HCF of 6x and 9x²?", o: ["3", "x", "3x", "6x", "9x²", "18x²"], a: "3x" },
                    { q: "Factorise 7y - 7y²", o: ["7(y-y²)", "y(7-7y)", "7y(1-y)", "7y²(1-y)", "7(y-y)", "7y(y-1)"], a: "7y(1-y)" },
                    { q: "Factorise 12p² - 15p", o: ["3(4p²-5p)", "p(12p-15)", "3p(4p-5)", "12p(p-1.25)", "15p(0.8p-1)", "3p²(4-5p)"], a: "3p(4p-5)" },
                    { q: "Factorise 2x + 4y + 6z", o: ["2(x+2y+3z)", "2(x+y+z)", "xyz(2+4+6)", "6(x+y+z)", "2(x+2y+3)", "3(x+y+z)"], a: "2(x+2y+3z)" },
                    { q: "Factorise 5x² + 10x + 15", o: ["5(x²+2x+3)", "5x(x+2+3)", "5(x²+10x+15)", "x(5x+10+15)", "15(x²+x+1)", "5(x²+2x+15)"], a: "5(x²+2x+3)" },
                    { q: "Factorise 9y - y² - xy", o: ["y(9-y-x)", "9(y-y²-xy)", "y(9-y²-x)", "x(9y-y²-y)", "y(9-xy)", "y(9-1-x)"], a: "y(9-y-x)" },
                    { q: "Factorise 14ab + 21a", o: ["7(2ab+3a)", "a(14b+21)", "7a(2b+3)", "14a(b+1.5)", "21a(2/3b+1)", "7b(2a+3)"], a: "7a(2b+3)" },
                    { q: "Factorise 18x²y - 6xy²", o: ["6(3x²y-xy²)", "xy(18x-6y)", "6xy(3x-y)", "6x²y²(3-1)", "3xy(6x-2y)", "6y(3x²-xy)"], a: "6xy(3x-y)" },
                    { q: "Factorise p + p² + p³", o: ["p(1+p+p²)", "p(p+p²)", "p²(1+p)", "p³(p⁻²+p⁻¹+1)", "3p(1+p+p²)", "p(3)"], a: "p(1+p+p²)" },
                    { q: "Factorise 8a³ - 4a²", o: ["4a(2a²-a)", "4a²(2a-1)", "a²(8a-4)", "8a²(a-0.5)", "4a³(2-a⁻¹)", "2a²(4a-2)"], a: "4a²(2a-1)" },
                    { q: "Which expression is not a factor of 12x²y?", o: ["3x", "4y", "6xy", "12x²", "xy²", "2x"], a: "xy²" },
                    { q: "Factorise 16m²n - 24mn²", o: ["8mn(2m-3n)", "8(2m²n-3mn²)", "mn(16m-24n)", "8m²n²(2-3)", "4mn(4m-6n)", "8n(2m²-3mn)"], a: "8mn(2m-3n)" },
                    { q: "Factorise fully: 2πr² + 2πrh", o: ["2π(r²+rh)", "2r(πr+πh)", "2πr(r+h)", "πr(2r+2h)", "2(πr²+πrh)", "r(2πr+2πh)"], a: "2πr(r+h)" },
                    { q: "Factorise 100 - 20x", o: ["10(10-2x)", "2(50-10x)", "20(5-x)", "5(20-4x)", "100(1-0.2x)", "4(25-5x)"], a: "20(5-x)" },
                    { q: "Factorise x(a+b) + y(a+b)", o: ["(x+y)(a+b)", "xy(a+b)", "(x+a)(y+b)", "a(x+y)+b(x+y)", "ab(x+y)", "xy(2a+2b)"], a: "(x+y)(a+b)" },
                    { q: "Factorise 3a(x-1) - 2(x-1)", o: ["(3a-2)(x-1)", "3a-2(x-1)", "(3a-2x)+2", "x-1(3a-2)", "6a(x-1)", "-6a(x-1)"], a: "(3a-2)(x-1)" },
                    { q: "Factorise 9x²y + 6xy² - 3xy", o: ["3(3x²y...)", "xy(9x+6y-3)", "3xy(3x+2y-1)", "3x(3xy...)", "3y(3x²+...)", "3xy(3x+2y)"], a: "3xy(3x+2y-1)" },
                    { q: "Factorise 20ab - 15a", o: ["5(4ab-3a)", "a(20b-15)", "5a(4b-3)", "10a(2b-1.5)", "5b(4a-3)", "15a(4/3b-1)"], a: "5a(4b-3)" },
                    { q: "Factorise 7p - 21q", o: ["7(p-3q)", "7(p-21q)", "21(p/3-q)", "p(7-21q)", "q(7p-21)", "7p(1-3q)"], a: "7(p-3q)" },
                    { q: "Factorise m² + m", o: ["m(m+1)", "m²(1+m⁻¹)", "2m(m)", "m(m)", "2m²", "m+m²"], a: "m(m+1)" },
                    { q: "Factorise 18 - 3y", o: ["3(6-y)", "18(1-y/6)", "y(18-3)", "3(6-3y)", "9(2-y/3)", "6(3-y/2)"], a: "3(6-y)" },
                    { q: "Factorise 5x² - 10x", o: ["5(x²-2x)", "x(5x-10)", "5x(x-2)", "10x(0.5x-1)", "5x²(1-2/x)", "2x(2.5x-5)"], a: "5x(x-2)" },
                    { q: "Factorise 6ab + 9bc", o: ["3(2ab+3bc)", "b(6a+9c)", "3b(2a+3c)", "3a(2b+3c)", "3c(2ab+3b)", "abc(6+9)"], a: "3b(2a+3c)" },
                    { q: "Factorise 4x + 8y", o: ["4(x+2y)", "2(2x+4y)", "8(x/2+y)", "x(4+8y)", "y(4x+8)", "4(x+8y)"], a: "4(x+2y)" },
                    { q: "Factorise 12x² - 9x", o: ["3(4x²-3x)", "x(12x-9)", "3x(4x-3)", "9x(4/3x-1)", "12x(x-3/4)", "3x²(4-3/x)"], a: "3x(4x-3)" },
                    { q: "Factorise 25y² + 15y", o: ["5(5y²+3y)", "y(25y+15)", "5y(5y+3)", "15y(5/3y+1)", "25y(y+3/5)", "5y²(5+3/y)"], a: "5y(5y+3)" },
                    { q: "Factorise 8x²y - 4xy", o: ["4(2x²y-xy)", "xy(8x-4)", "4xy(2x-1)", "4x(2xy-y)", "4y(2x²-x)", "8xy(x-0.5)"], a: "4xy(2x-1)" },
                    // Hard Difficulty (10 questions)
                    { q: "Factorise 5(x+2) + 3x(x+2)", o: ["(5+3x)(x+2)", "8x(x+2)", "15x(x+2)", "5+3x(x+2)", "(5x+10)(3x²+6x)", "3x+5(x+2)"], a: "(5+3x)(x+2)" },
                    { q: "Expand and then factorise fully: 3(2x+4) + 2(x+1)", o: ["8(x+2)", "2(4x+7)", "8x+14", "4(2x+3.5)", "2(4x+14)", "Cannot be factorised"], a: "2(4x+7)" },
                    { q: "Factorise a²b + ab² + a²b²", o: ["ab(a+b+ab)", "a²b²(a⁻¹+b⁻¹+1)", "a(ab+b²+ab²)", "b(a²+ab+a²b)", "ab(a+b)", "ab(a²+b²+ab)"], a: "ab(a+b+ab)" },
                    { q: "The area of a rectangle is 6x²+9x. Which could be its dimensions?", o: ["3 and 2x²+3x", "x and 6x+9", "3x and 2x+3", "All of the above", "None of the above", "6x and x+1.5"], a: "All of the above" },
                    { q: "Factorise 4m(p+q) - 6n(p+q)", o: ["2(p+q)(2m-3n)", "10mn(p+q)", "(4m-6n)(p+q)²", "(p+q)(4m-6n)", "Both A and D", "24mn(p+q)"], a: "Both A and D" },
                    { q: "Expand and factorise: 8(x+2) - 2(x+4)", o: ["6(x+2)", "6x+8", "2(3x+4)", "4(1.5x+2)", "6x+12", "6(x+1.33)"], a: "2(3x+4)" },
                    { q: "Factorise -5x - 20", o: ["-5(x+4)", "5(-x-4)", "-5(x-4)", "Both A and B", "5(x-4)", "-5(-x-4)"], a: "Both A and B" },
                    { q: "Factorise x³y² - x²y³ + x²y²", o: ["x²y²(x-y+1)", "xy(x²y-xy²+xy)", "x²(xy²-y³+y²)", "y²(x³-x²y+x²)", "x²y²(x-y)", "x²y²(x+y+1)"], a: "x²y²(x-y+1)" },
                    { q: "The surface area of a cylinder is 2πr² + 2πrh. What is this in factorised form?", o: ["2π(r²+rh)", "2r(πr+πh)", "2πr(r+h)", "πr(2r+2h)", "2(πr²+πrh)", "r(2πr+2πh)"], a: "2πr(r+h)" },
                    { q: "Expand and factorise: 2x(x+y) + 3y(x+y)", o: ["(2x+3y)(x+y)", "5xy(x+y)", "6xy(x+y)", "(2x+y)(x+3y)", "(2x+3y)(x+y)²", "2x²+5xy+3y²"], a: "(2x+3y)(x+y)" },
                ]
            }
        ];

        // --- DOM ELEMENTS ---
        const levelSelectionScreen = document.getElementById('level-selection');
        const levelsGrid = document.getElementById('levels-grid');
        const mainView = document.getElementById('main-view');
        
        const presentationView = document.getElementById('presentation-view');
        const slideTopic = document.getElementById('slide-topic');
        const slideContent = document.getElementById('slide-content');
        const prevSlideBtn = document.getElementById('prev-slide-btn');
        const nextSlideBtn = document.getElementById('next-slide-btn');
        const slideCounter = document.getElementById('slide-counter');
        const startGameBtn = document.getElementById('start-game-btn');

        const gameView = document.getElementById('game-view');
        const gameTopic = document.getElementById('game-topic');
        const backToLevelsBtn = document.getElementById('back-to-levels-btn');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const questionText = document.getElementById('question-text');
        const optionsGrid = document.getElementById('options-grid');

        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalText = document.getElementById('modal-text');
        const modalBtn = document.getElementById('modal-btn');

        // --- GAME STATE ---
        let currentLevelIndex = 0;
        let currentSlideIndex = 0;
        let currentQuestionIndex = 0;

        // --- FUNCTIONS ---

        function init() {
            renderLevelCards();
            backToLevelsBtn.addEventListener('click', showLevelSelection);
        }

        function renderLevelCards() {
            levelsGrid.innerHTML = '';
            levelsData.forEach((level, index) => {
                const card = document.createElement('div');
                card.className = `bg-gray-800 p-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300 text-center cursor-pointer`;
                card.innerHTML = `
                    <div class="text-5xl mb-4">${['📝', '🔄', '➗', '⚙️'][index]}</div>
                    <h2 class="text-2xl font-bold text-cyan-400 mb-2">${level.title}</h2>
                    <p class="text-gray-400">${level.description}</p>
                `;
                card.addEventListener('click', () => startLevel(index));
                levelsGrid.appendChild(card);
            });
        }

        function startLevel(index) {
            currentLevelIndex = index;
            currentSlideIndex = 0;
            levelSelectionScreen.classList.add('hidden');
            mainView.classList.remove('hidden');
            mainView.classList.add('flex');
            gameView.classList.add('hidden');
            presentationView.classList.remove('hidden');
            
            showSlide();

            prevSlideBtn.addEventListener('click', () => navigateSlide(-1));
            nextSlideBtn.addEventListener('click', () => navigateSlide(1));
            startGameBtn.onclick = () => {
                presentationView.classList.add('hidden');
                gameView.classList.remove('hidden');
                startGame();
            };
        }

        function showSlide() {
            const level = levelsData[currentLevelIndex];
            const slide = level.slides[currentSlideIndex];
            slideTopic.textContent = level.title;
            slideContent.innerHTML = `
                <h3 class="text-2xl font-semibold mb-4">${slide.title}</h3>
                ${slide.content}
            `;
            slideCounter.textContent = `Slide ${currentSlideIndex + 1} / ${level.slides.length}`;
            prevSlideBtn.disabled = currentSlideIndex === 0;
            prevSlideBtn.classList.toggle('opacity-50', prevSlideBtn.disabled);
            nextSlideBtn.style.display = currentSlideIndex === level.slides.length - 1 ? 'none' : 'inline-block';
            startGameBtn.style.display = currentSlideIndex === level.slides.length - 1 ? 'inline-block' : 'none';
        }

        function navigateSlide(direction) {
            currentSlideIndex += direction;
            showSlide();
        }

        function startGame() {
            const level = levelsData[currentLevelIndex];
            gameTopic.textContent = `${level.title} Quiz`;
            currentQuestionIndex = 0;
            displayQuestion();
            updateProgress();
        }

        function displayQuestion() {
            let question = levelsData[currentLevelIndex].questions[currentQuestionIndex];

            if (!question) {
                levelComplete();
                return;
            }

            questionText.innerHTML = question.q;
            optionsGrid.innerHTML = '';
            question.o.forEach(optionText => {
                const button = document.createElement('button');
                button.className = 'option-btn bg-gray-700 hover:bg-cyan-700 text-white font-semibold py-4 px-2 rounded-lg text-lg';
                button.innerHTML = optionText;
                button.onclick = () => checkAnswer(button, optionText, question.a);
                optionsGrid.appendChild(button);
            });
            updateProgress();
        }

        function checkAnswer(button, selectedAnswer, correctAnswer) {
            Array.from(optionsGrid.children).forEach(btn => btn.disabled = true);

            if (selectedAnswer === correctAnswer) {
                button.classList.add('bg-green-600', 'correct');
                setTimeout(nextQuestion, 1000);
            } else {
                button.classList.add('bg-red-600', 'incorrect');
                setTimeout(nextQuestion, 2000);
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            const totalQuestions = levelsData[currentLevelIndex].questions.length;

            if (currentQuestionIndex >= totalQuestions) {
                levelComplete();
            } else {
                displayQuestion();
            }
        }
        
        function levelComplete() {
            const nextLevelIndex = currentLevelIndex + 1;
            if (nextLevelIndex < levelsData.length) {
                showModal("Quiz Complete!", `You've finished this topic. Feel free to try another!`, showLevelSelection);
            } else {
                showModal("Congratulations!", "You have completed all the challenges. Excellent work!", showLevelSelection);
            }
        }

        function updateProgress() {
            const level = levelsData[currentLevelIndex];
            const total = level.questions.length;
            const current = currentQuestionIndex;
            
            progressText.textContent = `Question ${current + 1}/${total}`;
            
            const progressPercentage = total > 0 ? ((current) / total) * 100 : 0;
            progressBar.style.width = `${progressPercentage}%`;
        }

        function showLevelSelection() {
            modal.classList.add('hidden');
            mainView.classList.add('hidden');
            levelSelectionScreen.classList.remove('hidden');
            renderLevelCards(); 
        }

        function showModal(title, text, callback) {
            modalTitle.textContent = title;
            modalText.textContent = text;
            modal.classList.remove('hidden');
            modalBtn.onclick = () => {
                modal.classList.add('hidden');
                if (callback) callback();
            };
        }

        init();
    </script>
</body>
</html>
